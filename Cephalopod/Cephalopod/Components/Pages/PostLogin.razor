@page "/post-login"
@inject NavigationManager NavigationManager

@code
{
    [CascadingParameter]
    private HttpContext? HttpContext { get; init; }

    [SupplyParameterFromQuery] 
    private string? ReturnUrl { get; init; }

    [SupplyParameterFromQuery] 
    private string? AccessToken { get; init; }

    [SupplyParameterFromQuery] 
    private string? RefreshToken { get; init; }
    

    protected override void OnInitialized()
    {
        if(!string.IsNullOrWhiteSpace(AccessToken))
            HttpContext?.Response.Cookies.Append(
                BlazorConstants.AccessTokenCookieName, AccessToken);

        if(!string.IsNullOrWhiteSpace(RefreshToken))
            HttpContext?.Response.Cookies.Append(
                BlazorConstants.RefreshTokenCookieName, RefreshToken);

        NavigationManager.NavigateTo(ReturnUrl ?? "/");
    }
}
